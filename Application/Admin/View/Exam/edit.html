<extend name="Public/base"/><block name="body">    <div class="main-title">        <h2>编辑城市</h2>    </div>    <form action="{:U('City/edit',array('id'=>$info['no']))}" method="post" class="form-horizontal">        <div class="form-item">            <label class="item-label">名称</label>            <div class="controls">                <input type="text" class="text input-large" name="areaname" value="{$info.areaname}">            </div>        </div>        <div class="form-item">            <label class="item-label">类型</label>            <div class="controls">                <select name="arealevel">                    <option value="1" {$info['arealevel']=='1'?'selected':''}>省</option>                    <option value="2" {$info['arealevel']=='2'?'selected':''}>市</option>                    <option value="3" {$info['arealevel']=='3'?'selected':''}>区</option>                </select>            </div>        </div>        <div class="form-item">            <label class="item-label">父级</label>            <div class="controls">                <select id="sheng">                    <option value="0" {$info['topno']==0?'selected':''}>顶级</option>                    <foreach name="sheng" item="v">                        <option value="{$v.no}" {$info['topno']==$v['no']?'selected':''}>{$v.areaname}</option>                    </foreach>                </select>            </div>            <div class="controls">                <input type="text" readonly name="topno" id="topno" class="text input-large"  value="{$info['topno']?$info['topno']:0}"/>                <input type="text" readonly id="topname" class="text input-large" />            </div>        </div>        <div class="form-item">            <button class="btn submit-btn ajax-post" id="submit" type="submit" target-form="form-horizontal">确 定</button>            <button class="btn btn-return" onclick="javascript:history.back(-1);return false;">返 回</button>        </div>    </form></block><block name="script">    <script type="text/javascript">        $('#sheng').on('change',function(){            var topno=$(this).val();            $('#topno').val(topno);            $('#topname').val($('#sheng option:checked').text());            $.get('{:U("City/getChild")}',{topno:topno},function(data){                if(data.status==1){                    var city=data.list;                    var str='<select id="city"><option value="0">顶级</option> ';                    for(var val in city){                        str+='<option value="'+city[val].no+'">'+city[val].areaname+'</option>';                    }                    str+='</select>';                }                $('#sheng').parent().find('#city').remove();                $('#sheng').parent().append(str);            });        });        $(document).on('change','#city',function(){            var topno=$(this).val();            $('#topno').val(topno);            $('#topname').val($('#city option:checked').text());        });        //导航高亮        highlight_subnav('{:U('City/index')}');    </script></block>